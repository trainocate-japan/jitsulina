---
sidebar: auto
title: 入門編 演習手順
---

実務で使えるLinux 入門編 演習手順
==

## 演習3 アカウント管理
### 概要
- システム管理作業で必要となる、ユーザーとグループの管理作業を学びます
- 2章で学んだパーミッションの効果もこちらで確認します

#### 所要時間
40分

### 実施内容
- ユーザーとグループの状況確認
- 新規ユーザーの作成とユーザーの変更
- パーミッションの動作確認
- グループの動作確認 

###
### 演習：ユーザーとグループの状況確認
#### 1. 現在ログインしているユーザーの情報を詳細に表示してください。少なくともユーザーIDと所属グループは表示してください

  ::: details 解答例
  id
  :::

#### 1. 演習環境のLinuxに登録済みのユーザー一覧を表示してください。方法は問いません

  ::: details 解答例
  cat /etc/passwd
  :::

#### 1. 演習環境のLinuxに登録済みのグループ一覧を表示してください。方法は問いません

  ::: details 解答例
  cat /etc/group
  :::

#### 1. 次は、ec2-userが所属しているグループだけを表示してください。方法は問いません

  ::: details 解答例
  cat /etc/group|grep ec2-user
  :::

### 演習：新規ユーザーの作成
#### 1. 以降の作業は、当面 root ユーザ−で実施します。以下のコマンドでrootユーザーになってください。パスワードは不要です（ec2-userはパスワードなしでsudoが実行できるよう設定済みです）
  ```
  sudo su -
  ```

  :::tip
  ディストリビューションや設定によって rootユーザーへの変更方法は異なります。また、rootユーザーにパスワードが設定されてないこともあります。その場合はsudoコマンドでのみroot権限を行使できます。rootユーザーにパスワードが設定されていないのはセキュリティ上の利用のため、むやみにパスワードは設定しないほうがよいです
  :::

#### 1. user1 という新規ユーザーを作成してください。ホームディレクトリはユーザー名と同じ、シェルはBash、グループの指定は不要です。

  ::: details 解答例
  useradd user1 -m -s /bin/bash
  :::

#### 1. ユーザーが作成されたことを確認してください。方法は問いません

  ::: details 解答例
  cat /etc/passwd
  :::

#### 1. exitコマンドを実行して、ec2-userに戻ってください

  :::tip
  suコマンドでユーザーを変更すると、そのユーザーで新たにシェルが起動しています。exitコマンドでそのシェルを終了させることで、元のユーザーに戻ることができます
  :::

  :::tip
  以降の作業でroot権限が必要な場合は、rootユーザーへの変更ではなくsudoコマンドを使っても構いません。実際の業務では、root権限の利用を許可していないこともありますので現場のルールを確認してください
  :::

#### 1. ec2-user に戻ったことが確認できたら、user1ユーザーに切り替えてください

  ::: details 解答例
  su - user1
  <br>
  しかし結果は、、、
  :::

#### 1. 前のコマンドは失敗するか、作業が完了できなかったと思います。なぜでしょうか？

  ::: details 解答例
  user1にはパスワードが設定されていないため、ログインができない
  :::

#### 1. user1にパスワードを設定してください。パスワードは忘れなければ何でも構いません（password など）。ただし、現在ec2-userのため、権限を変更しないと作業出来ないはずです。

  ::: details 解答例
  sudo passwd user1
  :::

  :::danger
  通常、password のような簡単なパスワードの利用は現場で許可されていません。演習環境はインターネットなど外部からは遮断されているため特別に許可されていると考えてください
  :::

#### 1. 無事パスワードの変更ができたら、user1ユーザーに変更してください

  ::: details 解答例
  su - user1
  :::

### 演習：パーミッションとグループ
#### 1. user1とec2-userで共有したいファイルやディレクトリがあるとします。ひとまず、ec2-userのホームディレクトリの内容を表示してください。結果はどうでしたか？

  ::: details 解答例
  ls /home/ec2-user
  <br>
  上記を実行しても、許可がないというエラーで参照できない
  :::

#### 1. 問題を解決するために必要な手続きを考えてください。考えた後、解答例を見てください

  ::: details 解答例
  ec2-userとuser1を同じグループに所属させる
  <br>
  そのグループで利用できるパーミッションを持つ共有のディレクトリを用意する
  :::

  :::tip
  ec2-userのディレクトリ内に他のユーザーからアクセスできるディレクトリを作るという手法もあります。しかしホームディレクトリは一般的にそのユーザー専用のディレクトリであるため、別途共有用のディレクトリを用意することが多いです
  :::

#### 1. 以降の作業はroot権限が必要なものがあります。rootユーザーで行ってもsudoコマンドを利用してもどちらでも構いません
#### 1. ec-2userとuser1を所属させるグループを作成してください。グループ名は「common」としてください
#### 1. 共有ディレクトリを作成します。/optディレクトリ内に shared ディレクトリを作成してください
#### 1. /opt/sharedディレクトリのグループを、commonグループに変更してください
#### 1. ディレクトリのグループのパーミッションを rwx に変更してください
#### 1. これまでの作業結果に問題がないことを確認してください。確認の方法は問いません
#### 1. ec2-userとuser1を、common グループに参加させてください
#### 1. /opt/sharedディレクトリに、何でもよいのでファイルを作成し、作成されたことを確認してください。うまくできたでしょうか？
#### 1. idコマンドでユーザーの情報を表示し、うまく行かなかった原因を考えて、対処しましょう
#### 1. 再度/opt/sharedディレクトリにファイルを作成してみてください。今度はうまくいくはずです
#### 1. user1にユーザーを変更し、/opt/sharedディレクトリにファイルを作成してみてください
#### 1. ec2-userに戻り、user1をディレクトリも含めて削除しておいてください

- 以上で演習3は終了です。お疲れ様でした。早く終わった方は、復習や周りのメンバーのヘルプを行いましょう

---
[入門編の目次に戻る](../index.md)
<br>

 [トップページに戻る](../../index.md)